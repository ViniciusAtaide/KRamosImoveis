"use strict";angular.module("kleberApp",["ngCookies","ngResource","ngSanitize","ngRoute","ui.bootstrap"]).config(["$routeProvider","$httpProvider",function(a){a.when("/",{templateUrl:"static/views/main.html",controller:"MainCtrl"}).when("/lista",{templateUrl:"static/views/lista.html",controller:"ListaCtrl"}).when("/completos",{templateUrl:"static/views/lista.html",controller:"CompletosCtrl"}).when("/imovel/:id",{templateUrl:"static/views/detalhe.html",controller:"DetalheCtrl",resolve:{imovel: ['$q','$http','$route','global',function(a,b,c,d){var e=a.defer();return b.get(d.apiUrl+"imoveis/"+c.current.params.id+"/").success(function(a){e.resolve(a)}),e.promise}]}}).otherwise({redirectTo:"/"})}]),angular.module("kleberApp").controller("MainCtrl",["$scope","$http","global","$location","filtro",function(a,b,c,d,e){a.interval=5e3,a.pretencoes=[{nome:"Aluguel",valor:"aluguel"},{nome:"Temporada",valor:"temporada"}],a.baseurl=c.mediaUrl,b.get(c.apiUrl+"cidades/").success(function(b){a.cidades=b.results}),b.get(c.apiUrl+"imoveis/").success(function(b){a.construcao=[],a.lancamentos=[],b=b.results,angular.forEach(b,function(b){0!=b.lancamento?a.construcao.push(b):a.lancamentos.push(b)})}),b.get(c.apiUrl+"slides/").success(function(b){a.slides=b.results}),a.escolheCidade=function(d){b.get(c.apiUrl+"bairros/").success(function(b){a.bairros=[],angular.forEach(b.results,function(b){b.cidade.id==d&&a.bairros.push(b)})})},a.busca=function(b){e.setFiltro(b),e.setValormin("undefined"!=typeof a.valormin?a.valormin:0),e.setValormax("undefined"!=typeof a.valormax?a.valormax:999999999),d.path("/completos")}}]),angular.module("kleberApp").controller("DetalheCtrl",["$scope","imovel","global","$timeout",function(a,b,c,d){a.baseurl=c.mediaUrl,a.imovel=b,d(function(){$(".slider").Slider(),$(".baixo").responsiveManySlider({slideObjs:".paginador-detalhe",box:".window",paginadorActive:"ativo",slider:".listapaginador",nextPaginator:".pagnext",prevPaginator:".pagprev",paddingLeft:0})},1e3)}]),angular.module("kleberApp").controller("ListaCtrl",["$scope","global","$http","filtro",function(a,b,c,d){a.baseurl=b.mediaUrl,a.imoveis=[],a.tamanhopagina=function(){},a.paginas=[],a.paginaatual=0,c.get(b.apiUrl+"imoveis/").success(function(b){var c=[];angular.forEach(b.results,function(a){1==a.lancamento&&c.push(a)}),a.filtro=d,a.imoveis=c,a.mostra=a.imoveis.length>=a.tamanhopagina,a.numerodepaginas=function(){return Math.ceil(a.imoveis.length/a.tamanhopagina)},a.trocapagina=function(b){a.paginaatual=b};for(var e=1;e<=a.numerodepaginas;e++)a.paginas.push(e)})}]),angular.module("kleberApp").controller("CompletosCtrl",["$scope","$http","global","filtro",function(a,b,c,d){a.baseurl=c.mediaUrl,a.imoveis=[],a.tamanhopagina=15,a.paginas=[],a.paginaatual=0,a.filtro=d.getFiltro(),d.setFiltro({}),b.get(c.apiUrl+"imoveis/").success(function(b){var c=[];angular.forEach(b.results,function(a){if(0==a.lancamento&&angular.isObject(d.getFiltro())){var b=d.getValormin(),e=d.getValormax();a.valor_num>b&&a.valor_num<e&&c.push(a)}}),d.setValormin(0),d.setValormax(99999999),a.imoveis=c,a.mostra=a.imoveis.length>=a.tamanhopagina,a.numerodepaginas=function(){return Math.ceil(a.imoveis.length/a.tamanhopagina)},a.trocapagina=function(b){a.paginaatual=b-1};for(var e=1;e<=a.numerodepaginas();e++)a.paginas.push(e)})}]),angular.module("kleberApp").controller("AppCtrl",["$rootScope","$scope",function(a,b){a.$on("$routeChangeError",function(a,c,d,e){b.mensagem=e})}]),angular.module("kleberApp").factory("global",function(){return{mediaUrl:"media/",apiUrl:"api/"}}),angular.module("kleberApp").filter("startFrom",function(){return function(a,b){return b=+b,a.slice(b)}}),angular.module("kleberApp").filter("valormin",function(){return function(a){return a}}),angular.module("kleberApp").factory("filtro",function(){return{getFiltro:function(){return this.filtro},getValormin:function(){return this.valormin},getValormax:function(){return this.valormax},setFiltro:function(a){this.filtro=a},setValormin:function(a){this.valormin=a},setValormax:function(a){this.valormax=a}}});