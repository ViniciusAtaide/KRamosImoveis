"use strict";angular.module("kleberApp",["ngCookies","ngResource","ngSanitize","ngRoute","ui.bootstrap"]).constant("apiUrl","/api/").constant("mediaUrl","/media/").config(function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/lista",{templateUrl:"views/lista.html",controller:"ListaCtrl",resolve:{imoveis:function(a){return a.findAll()}}}).when("/completos",{templateUrl:"views/lista.html",controller:"CompletosCtrl",resolve:{imoveis:function(a){return a.findAll()}}}).when("/imovel/:id",{templateUrl:"views/detalhe.html",controller:"DetalheCtrl",resolve:{imovel:function(a,b){return b.findById(a.current.params.id)}}}).otherwise({redirectTo:"/"})}),angular.module("kleberApp").controller("MainCtrl",function(a,b,c,d,e){a.interval=5e3,a.pretencoes=[{nome:"Aluguel",valor:"aluguel"},{nome:"Temporada",valor:"temporada"}],b.get(c+"cidades/").success(function(b){a.cidades=b.results}),b.get(c+"imoveis/").success(function(b){a.construcao=[],a.lancamentos=[],b=b.results,angular.forEach(b,function(b){b.lancamento!==!1?a.construcao.push(b):a.lancamentos.push(b)})}),b.get(c+"slides/").success(function(b){a.slides=b.results}),a.escolheCidade=function(d){b.get(c+"bairros/").success(function(b){a.bairros=[],angular.forEach(b.results,function(b){b.cidade.id===d&&a.bairros.push(b)})})},a.busca=function(b){e.setFiltro(b),e.setValormin("undefined"!=typeof a.valormin?a.valormin:0),e.setValormax("undefined"!=typeof a.valormax?a.valormax:999999999),d.path("/completos")}}),angular.module("kleberApp").controller("DetalheCtrl",function(a,b,c){a.imovel=c,b(function(){$(".slider").Slider(),$(".baixo").responsiveManySlider({slideObjs:".paginador-detalhe",box:".window",paginadorActive:"ativo",slider:".listapaginador",nextPaginator:".pagnext",prevPaginator:".pagprev",paddingLeft:0})},1e3)}),angular.module("kleberApp").controller("ListaCtrl",function(a,b,c){a.imoveis=[],a.paginas=[],a.paginaatual=0,c.then(function(c){var d=[];angular.forEach(c.results,function(a){a.lancamento===!0&&d.push(a)}),a.filtro=b,a.imoveis=d,a.mostra=a.imoveis.length>=a.tamanhopagina,a.numerodepaginas=function(){return Math.ceil(a.imoveis.length/a.tamanhopagina)},a.trocapagina=function(b){a.paginaatual=b};for(var e=1;e<=a.numerodepaginas;e++)a.paginas.push(e);console.log(a.paginas)})}),angular.module("kleberApp").controller("CompletosCtrl",function(a,b,c){a.imoveis=[],a.tamanhopagina=15,a.paginas=[],a.paginaatual=0,a.filtro=b.getFiltro(),b.setFiltro({}),c.then(function(c){var d=[];angular.forEach(c.results,function(a){if(a.lancamento===!1&&angular.isObject(b.getFiltro())){var c=b.getValormin(),e=b.getValormax();a.valor_num>c&&a.valor_num<e&&d.push(a)}}),b.setValormin(0),b.setValormax(99999999),a.imoveis=d,a.mostra=a.imoveis.length>=a.tamanhopagina,a.numerodepaginas=function(){return Math.ceil(a.imoveis.length/a.tamanhopagina)},a.trocapagina=function(b){a.paginaatual=b-1},console.log(a.numerodepaginas());for(var e=1;e<=a.numerodepaginas();e++)a.paginas.push(e)})}),angular.module("kleberApp").controller("AppCtrl",function(a,b){a.$on("$routeChangeError",function(a,c,d,e){b.mensagem=e})}),angular.module("kleberApp").filter("valormin",function(){return function(a){return a}}),angular.module("kleberApp").factory("filtro",function(){var a=this;return{getFiltro:function(){return a.filtro},getValormin:function(){return a.valormin},getValormax:function(){return a.valormax},setFiltro:function(b){a.filtro=b},setValormin:function(b){a.valormin=b},setValormax:function(b){a.valormax=b}}});